<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Understanding HIDs</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=4d9bd65660" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="index.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Let's Go Exploring!" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Understanding HIDs" />
    <meta property="og:description" content="Mouses, keyboards, game controllers are every day devices we expect to work with our systems seamlessly. We don’t even have patience to download and install their drivers. We want them to work magically. Magical is convenient. But what is..." />
    <meta property="og:url" content="http://localhost:2368/understanding-hids/" />
    <meta property="article:published_time" content="2015-12-08T06:59:47.209Z" />
    <meta property="article:modified_time" content="2015-12-08T06:59:47.209Z" />
    <meta property="article:tag" content="hacks" />
    <meta property="article:tag" content="demo" />
    <meta property="article:tag" content="ps4" />
    <meta property="article:tag" content="usb" />
    <meta property="article:tag" content="hid" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Understanding HIDs" />
    <meta name="twitter:description" content="Mouses, keyboards, game controllers are every day devices we expect to work with our systems seamlessly. We don’t even have patience to download and install their drivers. We want them to work magically. Magical is convenient. But what is..." />
    <meta name="twitter:url" content="http://localhost:2368/understanding-hids/" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Let's Go Exploring!",
    "author": {
        "@type": "Person",
        "name": "Engin Dogusoy",
        "image": "//www.gravatar.com/avatar/9dbe6b19573734f32913b57f6d74b124?s=250&d=mm&r=x",
        "url": "http://localhost:2368/author/engin",
        "sameAs": null,
        "description": null
    },
    "headline": "Understanding HIDs",
    "url": "http://localhost:2368/understanding-hids/",
    "datePublished": "2015-12-08T06:59:47.209Z",
    "dateModified": "2015-12-08T06:59:47.209Z",
    "keywords": "hacks, demo, ps4, usb, hid",
    "description": "Mouses, keyboards, game controllers are every day devices we expect to work with our systems seamlessly. We don’t even have patience to download and install their drivers. We want them to work magically. Magical is convenient. But what is..."
}
    </script>

    <meta name="generator" content="Ghost 0.7" />
    <link rel="alternate" type="application/rss+xml" title="Let&#x27;s Go Exploring!" href="../rss/index.html" />
</head>
<body class="post-template tag-hacks tag-demo tag-ps4 tag-usb tag-hid nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-about" role="presentation"><a href="../about/index.html">About</a></li>
            <li class="nav-github" role="presentation"><a href="https://github.com/engd">GitHub</a></li>
            <li class="nav-linkedin" role="presentation"><a href="https://www.linkedin.com/in/engindogusoy">LinkedIn</a></li>
            <li class="nav-resume" role="presentation"><a href="https://dl.dropboxusercontent.com/u/5894566/engin_dogusoy_resume.pdf">Resume</a></li>
            <li class="nav-contact" role="presentation"><a href="mailto:engin.dogusoy@gmail.com">Contact</a></li>
    </ul>
    <a class="subscribe-button" href="../index.html">Blog</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button icon-menu" href="index.html#"><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-hacks tag-demo tag-ps4 tag-usb tag-hid">

        <header class="post-header">
            <h1 class="post-title">Understanding HIDs</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2015-12-07">07 December 2015</time>  on <a href="../tag/hacks/index.html">hacks</a>, <a href="../tag/demo/index.html">demo</a>, <a href="../tag/ps4/index.html">ps4</a>, <a href="../tag/usb/index.html">usb</a>, <a href="../tag/hid/index.html">hid</a>
            </section>
        </header>

        <section class="post-content">
            <p>Mouses, keyboards, game controllers are every day devices we expect to work with our systems seamlessly. We don’t even have patience to download and install their drivers. We want them to work magically. Magical is convenient. But what is the main ingredient of magic?</p>

<p>I have a Ps4 lying around for the past couple of weeks and honestly I am not excited about it at all. The controller, DualShock 4, is another story. I must give kudos to Sony for equipping this controller with various tricks and believing in developer’s creativity. As the platform owner, they have made the controller as interactive as they can and challenged developers to utilize these features in most creative ways. My weekend goal is to get to know Dualshock 4, particularly it’s touch-pad, without using a Playstation SDK (Because I don’t have one).</p>

<p>I’ve started my search with Tested’s article on using Ps4 as a PC controller. DS4Tool is an impressive tool that hides your DS4 behind a ,Windows-supported, Xbox 360 controller driver and as a result make it possible for you to use DS4 with PC games. Unfortunately I wasn’t able to find any source code so I ventured forth to a similar project; PS4PC.</p>

<p>PS4PC is a lightweight executable that maps PS4 touch-pad to your mouse. After playing with it for a while, now that I knew it is actually possible to use touch-pad on a PC, I was excited to learn more about USB devices.</p>

<p>Couple of hours of quick-and-dirty Google searches and going over partially helpful sources, wikis and code pieces, I knew good enough to say a couple of lines about USB devices and HIDs. The interaction between a USB device and a PC depends on simply polling. PC frequently “reads” the device and as a result the device returns a report, represented as a byte array, which holds information about device state. Of course it is a two-way street, PC can create a report and “write” to device to trigger features such as haptic feedback.</p>

<p>OK, now that we know how communication works, how do we specify content? That’s where our best friend HID comes in. HID is simply a contract between device producer and it’s future owners. It is, in a way, a map that explains meaning of each byte in the report. 6th byte may be the state of your left mouse button; either clicked or not. Of course, HIDs are pretty short and predictable for simpler USB devices such as regular mouses, but they may become beasts with devices such as DualShock 4. Realizing Sony has not released a public HID, my hopes for touch-pad integration were failing as I found out that some geniuses decided to decode HID on their own, great!</p>

<p>The rest was pretty simple; pick up an HID library project for C#, Java or your favorite language, find vendor and product ids for your device through Control Panel, write a simple program that reads your device in short time intervals and get the information you want by mapping bytes into booleans, integers, etc. using HID. One interesting characteristic with USB interaction is the concept of continuous information flow. Working mostly on mobile platforms nowadays, I tend to think event based interaction, someone tapping on a button, swiping, etc. However with USB devices there is always information coming in and it’s your job as the developer to decide what constitutes an event and react to it.</p>

<p>That’s about it; 5–6 hours, 2 pots of coffee, couple of mutterings and frustrations here there resulted in a DualShock 4 talking to a PC. If you are looking for an interesting weekend, pick your favorite USB device and try to see what lies under the driver, you may be surprised.</p>

<p><strong>Note:</strong> This experiment actually turned into a <a href="https://www.youtube.com/watch?v=enVsFl9Lu3U">demo</a>!</p>
            <div id="disqus_thread"></div>
<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//engind.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        </section>
    </article>
</main>

<aside class="read-next">
    <a class="read-next-story no-cover" href="../aws-lambda-missing-piece-of-aws-orchestration/index.html">
        <section class="post">
            <h2>AWS Lambda : Missing piece of AWS Orchestration</h2>
            <p>Last winter I was working on a small internal tool; one that should pull some files from an S3&hellip;</p>
        </section>
    </a>
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="../index.html">Let&#x27;s Go Exploring!</a> &copy; 2016</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a>,
            <a href="https://github.com/axitkhurana/buster">Buster</a> and
            <a href="https://pages.github.com">GitHub Pages</a> </section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=4d9bd65660"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=4d9bd65660"></script>

</body>
</html>
